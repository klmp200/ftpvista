{% load custom_filters %}
{% load url from future %}
{% load qurl %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>FTPVista 3.0</title>
    
    <link rel="search" type="application/opensearchdescription+xml" title="ftpvista" href="{{ base_url }}{% url 'static' 'resources/search_engine.xml' %}" />
    <link href="{% url 'static' 'css/jquery.treetable.css' %}" type="text/css" rel="stylesheet" />
    <link href="{% url 'static' 'css/jquery.multiselect.css' %}" type="text/css" rel="stylesheet" />
    <link href="{% url 'static' 'css/jquery-ui-1.10.4.custom.css' %}" type="text/css" rel="stylesheet" />
    <link href="{% url 'static' 'css/global.css' %}" type="text/css" rel="stylesheet" />
    <script src="{% url 'static' 'js/jquery-1.10.2.min.js' %}" type="text/javascript"></script>
    <script src="{% url 'static' 'js/jquery-ui-1.10.4.custom.min.js' %}" type="text/javascript"></script>
    <script src="{% url 'static' 'js/jquery.multiselect.min.js' %}" type="text/javascript"></script>
    <script src="{% url 'static' 'js/ftpvista.js' %}" type="text/javascript"></script>
</head>
<body>
    <script type="text/javascript">
        ftpvista = {
            search_engine_url: '{{ base_url }}{% url "static" "resources/search_engine.xml" %}',
            online_url: "{% url 'online' %}",
            results_url: "{% url 'results' %}"
        };
    </script>
    <div id="header">
        <h1>FTPVista</h1>
    </div>
    <div id="summary"><span>{{ nb_files }} fichiers - Total : {{ files_size|filesizeformat2 }}</span></div>
    <div id="search">
            <div id="tabs">
                <!-- the tabs -->
                <ul class="tabs">
                    <li><a id="t1" href="#search">Recherche</a></li>
                    <li><a id="t2" href="#server-list">Liste des serveurs</a></li>
                    <li><a id="t3" href="#last">Afficher les derniers fichiers</a></li>
                </ul>
                
                <!-- tab "panes" -->
                <div id="search" class="pane">
                    <form method="get" action="{% url 'search' %}">
                        <p>
                            {{ form.s }}
                            <input type="submit" value="Rechercher" />
                        </p>
                        
                        <a href="#" class="plus_sign">- Filtres</a>
                        <div class="advanced_pane">
                            <hr/>
                            {{ form.ft.label_tag }} {{ form.ft }}<br/>
                            {{ form.os }} {{ form.os.label_tag }}
                        </div>
                    </form>
                </div>
                <div id="server-list" class="pane">
                    {% include "online.html" %}
                </div>
                <div id="last" class="pane">
                    <form method="get" action="{% url 'last' %}">
                        {{ lastform.ft.label_tag }} {{ lastform.ft }}
                        <input type="submit" value="Rechercher" />
                    </form>
                </div>
            </div>
    </div>
    <div id="search_result">
        {% ifnotequal view 'index' %}
            {% if page > 1 %}
                <a href="{% qurl request.get_full_path page=page|add:'-1' %}" class="prev">&#8592; page précédente</a>
            {% endif %}
            {% if not is_last_page and aFileNodes|length > 0 %}
                <a href="{% qurl request.get_full_path page=page|add:'1' %}" class="next">page suivante &#8594;</a>
            {% endif %}
            <div class="results">
                {% include "search_results.html" %}
            </div>
            {% if page > 1 %}
                <a href="{% qurl request.get_full_path page=page|add:'-1' %}" class="prev">&#8592; page précédente</a>
            {% endif %}
            {% if not is_last_page and aFileNodes|length > 0 %}
                <a href="{% qurl request.get_full_path page=page|add:'1' %}" class="next">page suivante &#8594;</a>
            {% endif %}
        {% endifnotequal %}
    </div>
    <div id="footer">
        <p>FTPVista 3.0 by Magne &amp; Mc2</p>
    </div>
</body>
</html>
